<div class="bg-slate-50 min-h-screen font-sans text-slate-800">

  @if (isLoading()) {
    <div class="grid place-items-center h-screen">
      <div class="animate-spin rounded-full h-14 w-14 border-b-4 border-blue-600"></div>
    </div>
  }

  @else if (!course()) {
    <section class="flex flex-col items-center justify-center text-center min-h-screen p-8 space-y-6">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <h1 class="font-serif text-4xl font-extrabold text-slate-800">Curso Não Encontrado</h1>
      <p class="text-slate-500 max-w-md">O link que você acessou pode estar incorreto ou o curso não está mais disponível publicamente.</p>
      <a routerLink="/" class="mt-4 px-8 py-3 text-lg font-semibold rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition duration-300 shadow-lg">
        Voltar à Página Inicial
      </a>
    </section>
  }

  @else {
    <div class="animate-fade-in-up">
      <header class="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-slate-200/80">
        <div class="navbar max-w-7xl mx-auto px-6">
          <div class="navbar-start">
            <a href="https://movaut.com.br" target="_blank" rel="noopener noreferrer" class="font-serif text-xl font-bold text-blue-700">Movaut</a>
          </div>
          <div class="navbar-end">
            <button (click)="scrollTo('inscricao')" class="btn btn-primary bg-blue-600 hover:bg-blue-700 text-white border-0 rounded-full px-6">Inscrever-se</button>
          </div>
        </div>
      </header>

      <main>
        <section class="relative bg-slate-900 text-white py-24 md:py-32">
          <div class="absolute inset-0">
            <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=2071&auto=format&fit=crop"
                 alt="Pessoas em um curso" class="w-full h-full object-cover opacity-20">
          </div>
          <div class="relative z-10 max-w-4xl mx-auto px-6 text-center space-y-8">
            <h1 class="font-serif text-5xl md:text-7xl font-bold leading-tight">
              {{ course()?.title }}
            </h1>
            <p class="text-lg text-slate-300 max-w-3xl mx-auto leading-relaxed">{{ course()?.description }}</p>
            <div class="flex flex-wrap justify-center items-center gap-x-6 gap-y-3 text-slate-400">
              <div class="flex items-center gap-2">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c0-.414.336-.75.75-.75h10.5a.75.75 0 010 1.5H5.5a.75.75 0 01-.75-.75z" clip-rule="evenodd" /></svg>
                <span>Início em <strong>{{ groupedSchedule()[0]?.date | date:'longDate':'':'pt-BR' }}</strong></span>
              </div>
              <div class="flex items-center gap-2">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.095a1.23 1.23 0 00.41-1.412A9.957 9.957 0 0010 12c-2.31 0-4.438.784-6.131 2.095z" /></svg>
                <span>Organizado por <strong>Movaut</strong></span>
              </div>
            </div>
          </div>
        </section>

  @if (course()?.learningObjectives && course()!.learningObjectives!.length > 0) {
  <section class="bg-white py-16">
    <div class="max-w-6xl mx-auto px-6 space-y-12">
      <h2 class="font-serif text-4xl font-bold text-center text-slate-800">O que você vai aprender?</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">

        @for (objective of course()!.learningObjectives; track objective.title) {
          <div class="p-6 space-y-3">
            <div class="inline-block p-4 bg-blue-100 rounded-full">
              @switch (objective.icon) {
  @case ('light-bulb') {
    <svg
      class="w-7 h-7 md:w-8 md:h-8 text-amber-400 drop-shadow-sm hover:scale-110 transition-transform duration-200"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a15.045 15.045 0 01-7.5 0C4.508 19.64 2 16.59 2 12.5C2 7.828 6.477 4 12 4s10 3.828 10 8.5c0 4.09-2.508 7.14-6.25 8.811z" />
    </svg>
  }
  @case ('academic-cap') {
    <svg
      class="w-7 h-7 md:w-8 md:h-8 text-indigo-400 drop-shadow-sm hover:scale-110 transition-transform duration-200"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 14.25c-2.485 0-4.5-2.015-4.5-4.5s2.015-4.5 4.5-4.5 4.5 2.015 4.5 4.5-2.015 4.5-4.5 4.5z" />
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 14.25v4.5c0 1.25-.75 2.25-3 2.25s-3-1-3-2.25v-4.5" />
    </svg>
  }
  @case ('users') {
    <svg
      class="w-7 h-7 md:w-8 md:h-8 text-cyan-400 drop-shadow-sm hover:scale-110 transition-transform duration-200"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962A3 3 0 013 11.18V11a3 3 0 013-3h1.18a3 3 0 012.82 2.82m0 0a3 3 0 01-3 3H3.82a3 3 0 01-2.82-2.82" />
    </svg>
  }
  @case ('sparkles') {
    <svg
      class="w-7 h-7 md:w-8 md:h-8 text-fuchsia-400 drop-shadow-sm hover:scale-110 transition-transform duration-200"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
    </svg>
  }
  @case ('chat-bubble') {
    <svg
      class="w-7 h-7 md:w-8 md:h-8 text-emerald-400 drop-shadow-sm hover:scale-110 transition-transform duration-200"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z" />
    </svg>
  }
  @case ('chart-bar') {
    <svg
      class="w-7 h-7 md:w-8 md:h-8 text-sky-400 drop-shadow-sm hover:scale-110 transition-transform duration-200"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
    </svg>
  }
}

            </div>
            <h3 class="font-serif text-xl font-semibold">{{ objective.title }}</h3>
            <p class="text-slate-600">{{ objective.description }}</p>
          </div>
        }
      </div>
    </div>
  </section>
}

        <section class="bg-slate-100 py-20">
          <div class="max-w-4xl mx-auto px-6">
            <h2 class="font-serif text-4xl font-bold text-center text-slate-800 mb-16">Programação do Curso</h2>
            <div class="space-y-12">
              @for (group of groupedSchedule(); track group.date) {
                <div class="animate-fade-in-up">
                  <h3 class="font-serif text-2xl font-bold text-blue-700 mb-6 border-b-2 border-blue-200 pb-3">{{ group.date | date:'fullDate':'':'pt-BR' }}</h3>
                  <ul class="space-y-8 border-l-2 border-slate-300 ml-3">
                    @for (item of group.items; track item.id) {
                      <li class="relative pl-8 group">
                        <div class="absolute -left-[7px] top-1 w-3 h-3 rounded-full bg-blue-600 ring-4 ring-slate-100 transition-transform group-hover:scale-125"></div>
                        <time class="block text-sm text-slate-500 mb-1 font-medium">{{ item.startTime.toDate() | date:'shortTime':'':'pt-BR' }} - {{ item.endTime.toDate() | date:'shortTime':'':'pt-BR' }}</time>
                        <h4 class="font-serif text-xl font-semibold text-slate-800">{{ item.title }}</h4>
                        <p class="text-slate-600 leading-relaxed">{{ item.description }}</p>
                        <div class="flex flex-wrap gap-2 mt-3">
                          @for (speakerId of item.speakerIds; track speakerId) {
                            <span class="text-xs font-medium bg-slate-200 text-slate-700 px-2 py-1 rounded-full">{{ getSpeakerNameById(speakerId) }}</span>
                          }
                        </div>
                      </li>
                    }
                  </ul>
                </div>
              }
            </div>
          </div>
        </section>

        <section class="bg-white py-20 border-y border-slate-200">
          <div class="max-w-6xl mx-auto px-6 space-y-12">
            <h2 class="font-serif text-4xl font-bold text-center text-slate-800">Conheça os Palestrantes</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
              @for (speaker of courseSpeakers(); track speaker.id) {
                <div class="text-center p-6 space-y-4 hover:scale-105 transition-transform duration-300">
                  <div class="flex justify-center">
                    <div class="w-32 h-32 rounded-full ring-4 ring-blue-500 ring-offset-4 ring-offset-white overflow-hidden shadow-lg">
                      <img src="https://ui-avatars.com/api/?name={{speaker.name}}&background=random&color=fff&bold=true" alt="{{ speaker.name }}" class="w-full h-full object-cover" />
                    </div>
                  </div>
                  <div class="space-y-1">
                    <h3 class="font-serif text-2xl font-bold text-slate-800">{{ speaker.name }}</h3>
                    <p class="text-slate-600 leading-relaxed">{{ speaker.bio }}</p>
                  </div>
                </div>
              }
            </div>
          </div>
        </section>

        <section id="inscricao" class="py-20 bg-gradient-to-tr from-blue-700 to-blue-900">
          <div class="max-w-xl mx-auto px-6">
            <div class="bg-white shadow-2xl rounded-2xl p-8 md:p-12">
              <div class="text-center space-y-6">
                @if(registrationSuccess()) {
                  <div class="space-y-4">
                    <svg class="w-16 h-16 text-green-500 mx-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" /></svg>
                    <h2 class="font-serif text-3xl font-bold text-green-700">Inscrição Confirmada!</h2>
                    <p class="text-slate-600">Você receberá um e-mail de confirmação em breve. Estamos ansiosos para te ver no curso!</p>
                  </div>
                } @else {
                  <div class="space-y-2">
                    <h2 class="font-serif text-4xl font-bold text-slate-800">Inscreva-se Gratuitamente</h2>
                    <p class="text-slate-600">As vagas são limitadas. Garanta a sua agora mesmo!</p>
                  </div>
                 <form #registrationForm="ngForm" (ngSubmit)="handleRegistration()" class="w-full max-w-sm mx-auto space-y-4 mt-6">    <input type="text" [(ngModel)]="registrationModel.name" name="name" placeholder="Seu nome completo" required class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150" />
                    <input type="email" [(ngModel)]="registrationModel.email" name="email" placeholder="Seu melhor e-mail" required class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150" />
                    <input type="tel" [(ngModel)]="registrationModel.phone" name="phone" placeholder="Seu telefone (WhatsApp)" required class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150" />
                    @if(registrationError()) { <div role="alert" class="p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm"><span>{{registrationError()}}</span></div> }
                    <button type="submit" class="w-full px-4 py-3 text-lg font-semibold rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition duration-300 shadow-md disabled:opacity-50"[disabled]="isRegistering() || !registrationForm.valid">
                      @if(isRegistering()) {
                        <span class="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2 inline-block"></span>
                      }
                      Confirmar Inscrição
                    </button>
                  </form>
                }
              </div>
            </div>
          </div>
        </section>

        <footer class="bg-slate-100 border-t border-slate-200 py-10 text-center space-y-4">
          <h3 class="font-semibold text-slate-600">Gostou do curso? Compartilhe!</h3>
          <div class="flex justify-center gap-4">
            <button (click)="share('whatsapp')" class="btn btn-ghost btn-circle text-slate-500 hover:bg-blue-100 hover:text-blue-600" aria-label="Share on WhatsApp"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a8 8 0 100 16 8 8 0 000-16zM3.43 3.43a6.5 6.5 0 019.14 9.14 6.5 6.5 0 01-9.14-9.14zM10 5.25a.75.75 0 00-1.5 0v3a.75.75 0 00.75.75h3.5a.75.75 0 000-1.5h-2.75v-2.25z" /></svg></button>
            <button (click)="share('twitter')" class="btn btn-ghost btn-circle text-slate-500 hover:bg-blue-100 hover:text-blue-600" aria-label="Share on Twitter"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84" /></svg></button>
            <button (click)="share('linkedin')" class="btn btn-ghost btn-circle text-slate-500 hover:bg-blue-100 hover:text-blue-600" aria-label="Share on LinkedIn"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M18.5 0h-17A1.5 1.5 0 000 1.5v17A1.5 1.5 0 001.5 20h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0018.5 0zM6.5 16h-3V7h3v9zM5 5.75a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5zM16.5 16h-3v-4.25c0-1.01-.018-2.31-1.406-2.31-1.407 0-1.625 1.1-1.625 2.23V16h-3V7h2.875v1.313h.04c.4-.75 1.375-1.53 2.844-1.53 3.04 0 3.6 2 3.6 4.6v5.317z" /></svg></button>
          </div>
        </footer>
      </main>
    </div>
  }
</div>
