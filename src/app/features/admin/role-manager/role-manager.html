<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
  <div class="bg-background-alt rounded-lg shadow-2xl p-6 w-full max-w-lg border border-surface-400">
    <h3 class="text-xl font-bold text-tertiary mb-2">Gerenciar Papéis</h3>
    <p class="text-text-muted mb-4">Editando papéis para: <span class="text-primary">{{ user.email }}</span></p>

    <textarea
      [(ngModel)]="rolesAsText"
      rows="8"
      class="w-full p-2 bg-surface-200 border border-surface-400 rounded-md text-text-base font-mono text-sm focus:outline-none focus:ring-2 focus:ring-primary"
    ></textarea>
    <p class="text-xs text-text-subtle mt-1">Edite os papéis no formato JSON. Ex: "org_id": "admin_nacional"</p>

    @if (successMessage) {
      <div class="mt-4 p-2 text-sm text-green-300 bg-green-900/50 border border-green-700 rounded-md">
        {{ successMessage }}
      </div>
    }
    @if (errorMessage) {
      <div class="mt-4 p-2 text-sm text-accent-soft bg-primary/20 border border-primary/50 rounded-md">
        {{ errorMessage }}
      </div>
    }

    <div class="flex justify-end space-x-4 mt-6">
      <button (click)="close.emit()" class="px-4 py-2 rounded-md text-text-muted bg-surface-400 hover:bg-surface-500 transition-colors">
        Cancelar
      </button>
      <button (click)="onSaveRoles()" class="px-4 py-2 rounded-md text-tertiary bg-primary hover:bg-accent-dark transition-colors font-semibold">
        Salvar Alterações
      </button>
    </div>
  </div>
</div>
