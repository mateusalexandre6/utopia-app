<div class="overflow-x-auto bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-4">
  <h3 class="text-xl font-bold text-gray-100 mb-4 flex items-center gap-2">
    <svg xmlns="http://www.w3.org/2000/svg"
         fill="none"
         viewBox="0 0 24 24"
         stroke-width="1.5"
         stroke="currentColor"
         class="w-6 h-6 text-primary">
      <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 0115 0" />
    </svg>
    Usuários
  </h3>

  <table class="min-w-full text-sm rounded-lg overflow-hidden">
    <thead class="bg-gray-700 text-gray-200 uppercase tracking-wide text-xs border-b border-gray-600">
      <tr>
        <th class="px-4 py-3 text-left font-medium">Nome</th>
        <th class="px-4 py-3 text-left font-medium">Email</th>
        <th class="px-4 py-3 text-left font-medium">Papéis</th>
        <th class="px-4 py-3 text-right font-medium">Ações</th>
      </tr>
    </thead>

    <tbody class="divide-y divide-gray-700">
      @for (user of filteredUsers(); track user.uid) {
        <tr class="hover:bg-gray-750 transition-colors duration-150 animate-fade-in-up">
          <td class="px-4 py-3 text-gray-100 font-medium">{{ user?.email }}</td>
          <td class="px-4 py-3 text-gray-400">{{ user.email }}</td>
          <td class="px-4 py-3 text-gray-300 text-xs">{{ formatRoles(user.roles) }}</td>
          <td class="px-4 py-3 text-right">
            <button (click)="onManageRoles(user)"
                    class="btn btn-sm bg-primary text-white hover:bg-primary/80 rounded-md shadow-md transition-all">
              Gerenciar
            </button>
          </td>
        </tr>
      } @empty {
        <tr>
          <td colspan="4" class="text-center px-4 py-6 text-gray-400">
            Nenhum usuário encontrado.
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>

@if (selectedUser) {
  <app-role-manager
    [user]="selectedUser"
    (close)="onCloseModal()">
  </app-role-manager>
}
